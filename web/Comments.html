<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/Html.html to edit this template
-->
<html>
    <head>
        <title>Comments</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Merriweather&family=Montserrat&family=Open+Sans&family=Roboto+Condensed&display=swap');

            *{
                color: white;
                margin: 0;
                padding: 0;
            }
            body {
                font-family: "Roboto Condensed", sans-serif;
                font-weight: 400;
                font-style: normal;
                background-color: #f0f0f0;
            }
            .header {
                background-color: blueviolet;
                border-bottom: 2px solid black;
                display: flex;
                justify-content: space-between;
                align-items: baseline;
            }
            .logo {
                padding: 20px 15px;
                font-size: 40px;
                text-decoration: none;
                font-family: "Bebas Neue", sans-serif;
                font-weight: 400;
                font-style: normal;
                text-shadow: 2px 2px 2px black;
                color: white;
            }
            #logo {
                display: flex;
                justify-content: center;
                align-items: center;
            }
            #home,#mode{
                color: white;
                font-size: 24px;
                margin: 15px;
            }
            body::-webkit-scrollbar {
                display: none;
            }

            @media (min-width: 768px){
                #cards-container{
                    width: 360px;
                }
                #cards-main{
                    display: flex;
                    justify-content: space-between;
                    margin: 20px;
                    column-gap: 20px;
                }
            }

            @media (min-width: 840px){
                #message{
                    font-size: 20px;
                }
            }

            @media (max-width: 840px){
                #message{
                    font-size: 18px;
                }
            }

            @media (max-width: 768px){
                #cards-container{
                    width: 360px;
                }
                #cards-main{
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    flex-direction: column;
                    margin: 20px;
                    row-gap: 20px;
                }
                #comments{
                    width: 100%;
                }
            }

            @media (max-width: 425px){
                #cards-container{
                    width: 300px;
                }
                .logo{
                    font-size: 30px;
                    padding: 15px 10px;
                }
                #home,#mode{
                    font-size: 16px;
                }
                #message{
                    font-size: 16px;
                }
            }

            @media (max-width: 340px){
                #message{
                    font-size: 14px;
                }
            }

            .card {
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                border: 2px solid blueviolet;
                min-height: 450px;
                box-shadow: 0 0 8px black;
                border-radius: 4px;
                cursor: pointer;
                overflow: hidden;
                background-color: #fff;
                transition: all 0.3s ease;
            }

            .card:hover {
                box-shadow: 1px 1px 8px #d4ecff;
                transform: translateY(-2px);
            }

            .card-header {
                margin-bottom: -4px;
                position: relative;
            }

            .card-header img {
                width: 100%;
                height: 180px;
                object-fit: cover;
                border-bottom: 2px solid blueviolet;
            }

            .news-source {
                font-family: "Montserrat", sans-serif;
                font-weight: 400;
                font-style: normal;
                padding: 4px 12px;
                background-color: blueviolet;
                margin: 0;
            }

            #news-title {
                padding: 12px;
                color: black;
                font-family: "Merriweather", serif;
                font-weight: 400;
                font-style: normal;
            }

            .news-desc {
                color: black;
                padding: 12px;
                padding-top: 0px;
                text-overflow: ellipsis;
                font-family: "Open Sans", sans-serif;
                font-weight: 400;
                font-style: normal;
            }
            .flex{
                display: flex;
                justify-content: space-between;
                align-items: center;
                background-color: blueviolet;
                padding: 8px 10px;
                margin: 0;
            }

            .saved-news{
                color: white;
                font-size: 20px;
            }

            #social-sharing{
                display: flex;
                justify-content: space-evenly;
                align-items: center;
                background-color: blueviolet;
                padding: 8px 0;
            }

            .fa-brands,.fa-comment, .fa-copy{
                color: white;
                font-size: 22px;
            }

            .notification {
                display: none;
                position: fixed;
                top: 10px;
                right: 10px;
                color: white;
                background-color: blueviolet;
                padding: 15px;
                border-radius: 5px;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
                z-index: 1000;
                font-family: "Lato", sans-serif;
                font-weight: 400;
                font-style: normal;
            }

            #comments{
                position: relative;
                min-height: 430px;
                display: flex;
                flex-direction: column;
                flex-grow: 1;
                padding: 11px;
                background-color: white;
                border: 0.5px solid black;
                border-radius: 3px;
                box-shadow: 0px 0px 4px black;
            }

            .comments-card{
                margin-top: 20px;
                display: flex;
                flex-direction: column;
                row-gap: 10px;
            }

            .comment-card{
                border: 1px solid white;
                box-shadow: 0px 0px 4px black;
            }

            #add-comment{
                background-color: white;
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
                box-shadow: 0px 0px 4px black;
                border-radius: 2px;
            }

            #input-comment{
                color: black;
                padding: 5px 10px;
                background: none;
                border: 0;
                outline: 0;
                height: 20px;
                flex-grow: 1;
                box-shadow: 0px 0px 4px black;
                border-radius: 2px;
                border-bottom-right-radius: 0px;
                border-top-right-radius: 0px;
            }

            #add{
                color: blueviolet;
                font-size: medium;
                text-shadow: 1px 1px 2px black;
                padding: 8px
            }

            .comment-info{
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 8px;
                background-color: blueviolet
            }

            .user-info,.comment-date{
                color: white;
                text-shadow: 2px 2px 2px black;
                font-family: "Merriweather", serif;
            }

            .user-info{
                display: flex;
                column-gap: 10px;
                align-items: center;
            }

            .user-details{
                display: flex;
                flex-direction: column;
            }

            .user-info{
                font-size: x-large;
            }

            .username{
                font-size: large;
            }

            .comment-date{
                font-size: small;
            }

            .user-comment{
                font-family: "Open Sans", sans-serif;
                color: black;
                padding: 8px;
                border-bottom: 1px solid white;
            }

            .response{
                display: flex;
                justify-content: space-around;
                align-items: center;
                padding: 5px 0px;
                background-color: blueviolet;
            }

            #message{
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                display: none;
                white-space: nowrap;
                text-align: center;
            }

        </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
              integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
              crossorigin="anonymous" referrerpolicy="no-referrer" />
    </head>
    <body>
        <header class="header">
            <div>
                <a href="index.html"><i class="fa-solid fa-house" id="home"></i></a>
            </div>
            <div id="logo">
                <div class="logo">THE NOBLE NEWS</div>
            </div>
            <div>
                <i class="fa-solid fa-sun" id="mode"></i>
            </div>
        </header>
        <main id="cards-main">
            <div class="cards-container" id="cards-container"></div>
            <div id="comments">
                <div id="add-comment">
                    <input type="text" id="input-comment" placeholder="Add a comment....">
                    <i class="fa-solid fa-plus" id="add"></i>
                </div>
                <div id="message"></div>
                <div class="comments-card"></div>
            </div>
        </main>
        <template id="template-new-comment">
            <div class="comment-card comment-container" data-id="">
                <div class="comment-info">
                    <div class="user-info">
                        <i class="fa-solid fa-circle-user"></i>
                        <div class="user-details">
                            <span class="username">UserName</span>
                            <span class="comment-date"></span>
                        </div>
                    </div>
                    <i class="fa-solid fa-trash"></i>
                </div>
                <div class="user-comment">
                    gejssv ureeg rgrg fdbrbr bb re gb regr grhfbv eefehfb ehvb
                </div>
                <div class="response">
                    <div class="like">
                        <i class="fa-regular fa-thumbs-up"></i>
                        <span class="thumbs-up-count">0</span>
                    </div>
                    <div class="dislike">
                        <i class="fa-regular fa-thumbs-down"></i>
                        <span class="thumbs-down-count">0</span>
                    </div>
                </div>
            </div>
        </template>
        <div id="notification" class="notification"></div>
        <script>
            const Mode = document.getElementById("mode");
            Mode.addEventListener("click", function () {
                if (Mode.classList.contains("fa-sun")) {
                    localStorage.setItem("Mode", true);
                    change(true);
                } else {
                    localStorage.setItem("Mode", false);
                    change(false);
                }
            });

            function change(element) {
                if (element === true) {
                    Mode.classList.remove("fa-sun");
                    Mode.classList.add("fa-moon");
                    let message = document.getElementById("message");
                    document.querySelector("body").style.backgroundColor = "#454545";
                    document.getElementById("comments").style.backgroundColor = "#454545";
                    let cards = document.querySelectorAll('.card');
                    cards.forEach(card => {
                        card.style.backgroundColor = '#454545';
                    });
                    let titles = document.querySelectorAll("#news-title");
                    let descs = document.querySelectorAll(".news-desc");
                    let comment = document.querySelectorAll(".user-comment");
                    changeColor([...titles, ...descs, ...comment, message], 'white');
                } else {
                    Mode.classList.remove("fa-moon");
                    Mode.classList.add("fa-sun");
                    let message = document.getElementById("message");
                    document.querySelector("body").style.backgroundColor = "#f0f0f0";
                    document.getElementById("comments").style.backgroundColor = "white";
                    let cards = document.querySelectorAll('.card');
                    cards.forEach(card => {
                        card.style.backgroundColor = '#fff';
                    });
                    let titles = document.querySelectorAll("#news-title");
                    let descs = document.querySelectorAll(".news-desc");
                    let comment = document.querySelectorAll(".user-comment");
                    changeColor([...titles, ...descs, ...comment, message], 'black');
                }
            }

            function changeColor(elements, color) {
                elements.forEach(element => {
                    element.style.color = color;
                });
            }

            const home = document.getElementById("home");
            home.addEventListener('click', function () {
                localStorage.removeItem('commentPageData');
            });
            function shareOnWhatsApp() {
                const newsTitle = document.getElementById('news-title').innerText;
                const newsUrl = window.location.href;
                const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(newsTitle)} - ${encodeURIComponent(newsUrl)}`;
                window.open(whatsappUrl, '_blank');
            }

            function shareOnFacebook() {
                const newsTitle = document.getElementById('news-title').innerText;
                const newsUrl = window.location.href;
                const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(newsUrl)}&quote=${encodeURIComponent(newsTitle)}`;
                window.open(facebookUrl, '_blank');
            }

            function shareOnTwitter() {
                const newsTitle = document.getElementById('news-title').innerText;
                const newsUrl = window.location.href;
                const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(newsTitle)}&url=${encodeURIComponent(newsUrl)}`;
                window.open(twitterUrl, '_blank');
            }

            function showNotification(message) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = `notification`;
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }

            document.addEventListener("DOMContentLoaded", function () {
                const commentData = JSON.parse(localStorage.getItem('commentPageData'));
                const loggedInUserEmail = localStorage.getItem('email');
                if (commentData) {
                    const cardContainer = document.getElementById('cards-container');
                    const cardTemplate =
                            `<div class="card">
                <div>
                    <div class="card-header">
                        <img src="${commentData.imgSrc}" alt="news-image" onerror="this.src='alt-image.webp';" id="news-img" data-url="${commentData.url}">
                    </div>
                    <div>
                        <div class="flex">
                            <h6 class="news-source" id="news-source">${commentData.source}</h6>
                            <i onclick="saveNews(this.closest('.card'))" class="saved-news fa-regular fa-floppy-disk"></i>
                        </div>
                        <h3 id="news-title">${commentData.title}</h3>
                        <p class="news-desc" id="news-desc">${commentData.description}</p>
                    </div>
                </div>
                <div id="social-sharing">
                    <i class="fa-brands fa-whatsapp" onclick="shareOnWhatsApp()"></i>
                    <i class="fa-brands fa-facebook" onclick="shareOnFacebook()"></i>
                    <i class="fa-brands fa-x-twitter" onclick="shareOnTwitter()"></i>
                    <i class="fa-solid fa-copy" id="copy-url"></i>
                </div>
            </div>`;
                    cardContainer.innerHTML = cardTemplate;
                    const mode = localStorage.getItem("Mode");
                    if (mode === "true") {
                        change(true);
                    } else {
                        change(false);
                    }
                    const copyIcon = document.getElementById('copy-url');
                    copyIcon.addEventListener('click', function () {
                        const url = commentData.url;
                        navigator.clipboard.writeText(url).then(function () {
                            showNotification('URL copied to clipboard!');
                        }).catch(function (err) {
                            console.error('Could not copy text: ', err);
                            showNotification('Failed to copy URL.');
                        });
                    });
                    const clickableElements = [
                        document.getElementById('news-title'),
                        document.getElementById('news-img'),
                        document.getElementById('news-source'),
                        document.getElementById('news-desc')
                    ];
                    clickableElements.forEach(element => {
                        element.addEventListener('click', function () {
                            const url = commentData.url;
                            window.open(url, '_blank');
                        });
                    });

                    const addButton = document.getElementById('add');
                    addButton.addEventListener('click', async function () {
                        const email = localStorage.getItem('email');
                        const comment = document.getElementById('input-comment').value.trim();
                        const url = commentData.url;
                        if (email && comment) {
                            try {
                                const response = await fetch('/The_Noble_News/CommentsServlet', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({email, url, comment})
                                });
                                const result = await response.json();
                                if (result.status === 'success') {
                                    const Message = document.getElementById("message");
                                    Message.style.display = "none";
                                    showNotification('Comment added successfully!');
                                    document.getElementById('input-comment').value = '';
                                    fetchComments(url);
                                } else {
                                    showNotification(result.message || 'Failed to add comment.');
                                }
                            } catch (error) {
                                console.error('Error adding comment:', error);
                                showNotification('Server error: Could not add comment.');
                            }
                        } else {
                            showNotification('Please enter a comment.');
                        }
                    });
                    fetchComments(commentData.url);
                } else {
                    showNotification('No data available.');
                }

                async function fetchComments(url) {
                    try {
                        const response = await fetch(`/The_Noble_News/CommentsServlet?url=${encodeURIComponent(url)}`);
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }

                        const data = await response.json();
                        if (data.status === 'no_comments') {
                            const Message = document.getElementById("message");
                            Message.style.display = "block";
                            Message.innerHTML = data.message;
                            document.querySelector('.comments-card').innerHTML = '';
                        } else if (data.status === 'success') {
                            const likeDislikeData = await fetchLikeDislikeData();
                            displayComments(data.comments, likeDislikeData);
                        } else {
                            showNotification('Error fetching comments.');
                        }
                    } catch (error) {
                        console.error('Error fetching comments:', error);
                        showNotification('Server error: Could not fetch comments.');
                    }
                }

                function displayComments(comments, likeDislikeData) {
                    const commentsContainer = document.querySelector('.comments-card');
                    const template = document.getElementById('template-new-comment');
                    commentsContainer.innerHTML = '';

                    comments.forEach(comment => {
                        const commentClone = template.content.cloneNode(true);
                        const usernameSpan = commentClone.querySelector('.username');
                        const commentText = commentClone.querySelector('.user-comment');
                        const commentDate = commentClone.querySelector('.comment-date');
                        const deleteIcon = commentClone.querySelector('.fa-trash');
                        const thumbsUpIcon = commentClone.querySelector('.fa-thumbs-up');
                        const thumbsDownIcon = commentClone.querySelector('.fa-thumbs-down');
                        const thumbsUpCount = commentClone.querySelector('.thumbs-up-count');
                        const thumbsDownCount = commentClone.querySelector('.thumbs-down-count');

                        usernameSpan.textContent = comment.username;
                        commentText.textContent = comment.comment;
                        commentDate.textContent = formatTimeAgo(new Date(comment.date));
                        thumbsUpCount.textContent = comment.thumbsUpCount || 0;
                        thumbsDownCount.textContent = comment.thumbsDownCount || 0;

                        const commentId = comment.id;
                        const likeStatus = likeDislikeData.hasOwnProperty(commentId) ? likeDislikeData[commentId] : undefined;
                        if (likeStatus === 'like') {
                            thumbsUpIcon.classList.remove('fa-regular');
                            thumbsUpIcon.classList.add('fa-solid');
                        } else if (likeStatus === 'dislike') {
                            thumbsDownIcon.classList.remove('fa-regular');
                            thumbsDownIcon.classList.add('fa-solid');
                        }

                        commentClone.querySelector('.comment-container').setAttribute('data-comment-id', comment.id);
                        thumbsUpIcon.addEventListener('click', () => {
                            handleThumbs(comment.id, 'thumbsUp', thumbsUpIcon, thumbsUpCount, thumbsDownIcon, thumbsDownCount);
                        });
                        thumbsDownIcon.addEventListener('click', () => {
                            handleThumbs(comment.id, 'thumbsDown', thumbsDownIcon, thumbsDownCount, thumbsUpIcon, thumbsUpCount);
                        });

                        if (comment.email === loggedInUserEmail) {
                            deleteIcon.style.display = 'inline';
                            deleteIcon.addEventListener('click', function () {
                                deleteComment(comment.id);
                            });
                        } else {
                            deleteIcon.style.display = 'none';
                        }
                        commentsContainer.appendChild(commentClone);
                        const mode = localStorage.getItem("Mode");
                        if (mode === "true") {
                            change(true);
                        } else {
                            change(false);
                        }
                    });
                }

                async function fetchLikeDislikeData() {
                    const username = localStorage.getItem("username");
                    try {
                        const response = await fetch(`/The_Noble_News/LikeDislikeServlet?username=${encodeURIComponent(username)}`);
                        const result = await response.json();
                        if (result.status === 'success') {
                            return result.likesdislikes;
                        }
                    } catch (error) {
                        console.error('Error fetching like/dislike data:', error);
                    }
                    return {};
                }

                async function deleteComment(commentId) {
                    const userConfirmed = confirm('Are you sure you want to delete this comment?');
                    if (userConfirmed) {
                        try {
                            const email = localStorage.getItem("email");
                            const response = await fetch(`/The_Noble_News/CommentsServlet?commentId=${commentId}&email=${encodeURIComponent(email)}`, {
                                method: 'DELETE'  
                            });
                            const result = await response.json();
                            if (result.status === 'success') {
                                showNotification('Comment deleted successfully!');
                                fetchComments(commentData.url);  
                            } else {
                                showNotification('Failed to delete comment.');
                            }
                        } catch (error) {
                            console.error('Error deleting comment:', error);
                            showNotification('Server error: Could not delete comment.');
                        }
                    }
                }

                function handleThumbs(commentId, type, clickedIcon, countElement, oppositeIcon, oppositeCountElement) {
                    if (oppositeIcon.classList.contains('fa-solid')) {
                        oppositeIcon.classList.remove('fa-solid');
                        oppositeIcon.classList.add('fa-regular');
                        let currentOppositeCount = parseInt(oppositeCountElement.textContent, 10);
                        oppositeCountElement.textContent = currentOppositeCount - 1;
                    }

                    if (type === 'thumbsUp') {
                        if (clickedIcon.classList.contains('fa-regular')) {
                            clickedIcon.classList.remove('fa-regular');
                            clickedIcon.classList.add('fa-solid');
                            let currentCount = parseInt(countElement.textContent, 10);
                            countElement.textContent = currentCount + 1;
                            type = 'like';
                        } else if (clickedIcon.classList.contains('fa-solid')) {
                            clickedIcon.classList.remove('fa-solid');
                            clickedIcon.classList.add('fa-regular');
                            let currentCount = parseInt(countElement.textContent, 10);
                            countElement.textContent = currentCount - 1;
                            type = 'like-none';
                        }
                    }

                    if (type === 'thumbsDown') {
                        if (clickedIcon.classList.contains('fa-regular')) {
                            clickedIcon.classList.remove('fa-regular');
                            clickedIcon.classList.add('fa-solid');
                            let currentCount = parseInt(countElement.textContent, 10);
                            countElement.textContent = currentCount + 1;
                            type = 'dislike';
                        } else if (clickedIcon.classList.contains('fa-solid')) {
                            clickedIcon.classList.remove('fa-solid');
                            clickedIcon.classList.add('fa-regular');
                            let currentCount = parseInt(countElement.textContent, 10);
                            countElement.textContent = currentCount - 1;
                            type = 'dislike-none';
                        }
                    }
                    const username = localStorage.getItem("username");
                    fetch(`/The_Noble_News/LikeDislikeServlet`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({username, commentId, type})
                    })
                            .then(response => response.json())
                            .then(data => {
                                if (data.status !== 'success') {
                                    showNotification('Error updating thumbs.');
                                }
                            })
                            .catch(err => {
                                console.error('Error updating thumbs:', err);
                                showNotification('Server error: Could not update thumbs.');
                            });
                }

                function formatTimeAgo(date) {
                    const now = new Date();
                    const seconds = Math.floor((now - date) / 1000);
                    const minutes = Math.floor(seconds / 60);
                    const hours = Math.floor(seconds / 3600);
                    const days = Math.floor(seconds / 86400);
                    const weeks = Math.floor(seconds / 604800);
                    const months = Math.floor(seconds / 2592000);
                    const years = Math.floor(seconds / 31536000);
                    if (seconds < 60) {
                        return `${seconds}second ago`;
                    } else if (minutes === 1) {
                        return `1minute ago`;
                    } else if (minutes < 60) {
                        return `${minutes}minutes ago`;
                    } else if (hours === 1) {
                        return `1hour ago`;
                    } else if (hours < 24) {
                        return `${hours}hours ago`;
                    } else if (days === 1) {
                        return `1day ago`;
                    } else if (days < 30) {
                        return `${days}days ago`;
                    } else if (weeks === 1) {
                        return `1week ago`;
                    } else if (weeks < 52) {
                        return `${weeks}weeks ago`;
                    } else if (months === 1) {
                        return `1month ago`;
                    } else if (months < 12) {
                        return `${months}months ago`;
                    } else if (years === 1) {
                        return `1year ago`;
                    } else {
                        return `${years}years ago`;
                    }
                }
            });

            function saveNews(card) {
                const email = localStorage.getItem("email");
                const newsTitle = card.querySelector("#news-title").innerText;
                const newsUrl = card.querySelector("#news-img").dataset.url;
                fetch(`http://localhost:8080/The_Noble_News/NewsServlet?email=${email}`)
                        .then(response => response.json())
                        .then(savedNewsList => {
                            const isNewsSaved = savedNewsList.some(news => news.title === newsTitle && news.url === newsUrl);
                            if (isNewsSaved) {
                                showNotification("News is already saved!");
                            } else {
                                const newsImg = card.querySelector("#news-img").src;
                                const newsSource = card.querySelector("#news-source").innerText;
                                const newsDesc = card.querySelector("#news-desc").innerText;
                                const newsData = {
                                    email: email,
                                    img: newsImg,
                                    title: newsTitle,
                                    url: newsUrl,
                                    source: newsSource,
                                    desc: newsDesc
                                };
                                fetch(`http://localhost:8080/The_Noble_News/NewsServlet?email=${email}`, {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(newsData)
                                })
                                        .then(response => response.json())
                                        .then(data => {
                                            if (data.success) {
                                                showNotification("News saved successfully!");
                                            } else {
                                                showNotification("Failed to save news.");
                                            }
                                        })
                                        .catch(error => {
                                            console.error("Error saving news:", error);
                                            showNotification("An error occurred while saving news.");
                                        });
                            }
                        })
                        .catch(error => {
                            console.error("Error checking saved news:", error);
                        });
            }
        </script>
    </body>
</html>
